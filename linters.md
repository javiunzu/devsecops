# Linters

## What are linters?

Linters are programs that read and analyze source-code files and identify flaws
on them. Usually those flaws are based on configurable rules. Depending on the
tool, these flaws will be referred as problems, violations, issues or any other
word that suggests that the findings are something that has to be corrected.

The name "linter" comes from a tool originally called "lint" that analyzed C
source-code.

Linters fall into the category of static source-code analysis. Nowadays there
are linters for nearly every programming language.

## How do linters work?

Linters parse text files according to a given set of rules. Although some come
with an initial set, all of them let you customize the rules in effect.
Usually this is made with a configuration file in the root directory of a
project.

Along with the rules, exceptions can be declared. These are commonly known as
`pragmas`. The name comes again from the C programming language. The compiler
directive of the same name (#pragma) often used to suppress or force certain
compiler errors. Pragmas are annotations within the source-code and as such,
they should be used sparsely; otherwise if the rules or the linter change, there
is a good possibility that a lot of files have to be edited to comply again.

When a piece of code violates a rule, and a pragma is not found, the linter will
then issue a warning or error indicating what is the problem with the code.
Decent linters will even suggest how to fix the problem. Then it's the choice of
the developer to either fix the code, add an exception or review the rules.

## Why should I use linters?

Short answer: to avoid problems.
Kind of problems:

- Security issues. Most linters recognize common pitfalls and caveats of the
  language that could lead to vulnerable code.
- Performance issues. Modern linters are equipped to recognize expressions that
  have been deemed to produce unefficient code.
- Coding style. Linters can be used to comply to coding style guides. Therefore
  enforcing the use of these in a team will make new code more consistent with
  the existing one (assuming that the existing code already follows the style
  guide, that is).

## How NOT to use linters

In general, the only wrong way to use linters is not configuring them and
sticking to the default set of rules.

The default rules are an educated guess on which rules **might** make sense.
But in the end they will certainly won't be a 100% fit for your project
specifics.

You might think on using *pragmas* but, as mentioned earlier, these are meant to
be exception to the rule, not the rule.

### A (bad) real life-example

I worked on a project for a certain web application. The backend was written in
Python using Django and the client wanted to use `pylint` to armonize the code
base. But here's the thing: the code had to comply to the default set of rules.

To achieve that the code had to be modified no matter what and exceptions will
come in the form of pragmas that had to be "negotiated" with the Product Owner.
Every member of the team did its best to try to discourage the client ... to no
avail. And it went like this.

The version of pylint we used had a line length limit of 80 characters. If you
ever programmed in python, you will agree this is not a sane default. Comments
had to be squeezed, names of functions, classes, and variables had to be
shortened and anything with more than two levels of indentation had to be thrown
into unnecessary functions. List comprehensions had to be unrolled into other
structures, and table-like lists where splitted in awkward ways.

Pylint, by default also complains about the amount of public methods an object
has, the number of attributes, how many of them are public, etc ...
We ended up adding pragmas on literally every Python file of the project.

The list of awkward rules goes on and the modifications had to be applied even
on the files generated by the framework. Yeah, those files you should not be
touching.

Not to mention that modifying the whole codebase while still being able to
deploy was a daunting task. In the end, the result was a code base that made
nobody happy.

## How to use linters

Create a new configuration file on the root folder of your project and try to go
with the most restrictive set of rules - this is probably different for every
tool. Run it on your project and see how good does your code do.
For each found issue evaluate whether it makes sense or not. If it makes sense,
modify your code, if not suppress that warning.

Once you are done working on the rules, integrate the linter on your workflow.
Nowadays every IDE provides integration with linters. If not, you can use your
own script or even better: set a pre-commit hook.

Push the config file into version control so that others can use it.

There is still one more thing to do. Right now the linter runs locally but you
can install it on your CI/CD tool and include it as part of the release process.

Congratulations! You have successfuly created one of many quality gates for your
project.
